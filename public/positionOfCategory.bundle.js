(()=>{"use strict";const e=()=>fetch("/category/dataposition").then((e=>e.json())).then((e=>e)),t=()=>{const e=document.querySelectorAll(".namePosition"),t=document.querySelectorAll(".counter__value");for(let n=0;n<e.length;n++){const o=e[n].textContent,l=localStorage.getItem(o);t[n].value=null===l?0:l}},n=(t,n)=>{const o=window.location.href.split("").slice(31,67).join(""),l=document.getElementById("priceOfPosition");e().then((e=>{e.forEach((e=>{if(e.id===o&&"add"===n){const n=e.position.indexOf(t),o=e.price[n],c=l.innerHTML;l.innerHTML=Number(o)+Number(c)}else if(e.id===o&&"delete"===n){const n=e.position.indexOf(t),o=Number(e.price[n]),c=l.innerHTML-o;l.innerHTML-=c<=0?0:o}}))}))},o=()=>{const e=document.getElementById("doneCoffeeForToday"),t=document.querySelectorAll(".counter__value");let n=0;for(let e=0;e<t.length;e++)n+=Number(t[e].value);e.innerHTML=n},l=document.querySelector(".table"),c=document.getElementById("resetAll");l.addEventListener("click",(e=>{const t=e.target;i(t)})),c.addEventListener("click",(()=>{localStorage.clear(),(()=>{console.log("here");const e=document.querySelectorAll(".counter__value"),t=document.getElementById("doneCoffeeForToday"),n=document.getElementById("priceOfPosition");t.innerHTML="",n.innerHTML="";for(let t=0;t<e.length;t++)e.value=0})()}));const i=e=>{if(void 0!==e){if("add"===e.dataset.add){let l=e.parentNode.childNodes[1].innerHTML,c=e.dataset.add,i=(e.parentNode.childNodes[5].children[0].value,e.parentNode.children[2].childNodes[1]);i.value=Number(i.value)+1,localStorage.setItem(l,i.value),n(l,c),t(),o()}if("delete"===e.dataset.add){let l=e.parentNode.childNodes[1].innerHTML,c=e.dataset.add,i=(e.parentNode.childNodes[5].children[0].value,e.parentNode.children[2].childNodes[1]);i.value=i.value<=-1?0:Number(i.value)-1,localStorage.setItem(l,i.value),n(l,c),t(),o()}}};document.getElementById("sendInfo").addEventListener("click",(()=>{const e=document.querySelectorAll(".namePosition"),t=document.querySelectorAll(".price"),n=document.querySelectorAll(".counter__value");let o=[];for(let l=0;l<e.length;l++)o.push({name:e[l].innerHTML,amount:n[l].value,price:t[l].innerHTML});let l=new XMLHttpRequest;l.open("POST","http://localhost:3200/statistic",!0),l.setRequestHeader("Content-Type","application/json"),l.send(JSON.stringify(o))})),(async()=>{try{t(),await(async()=>{const t=document.querySelectorAll(".price"),n=await(async()=>{const t=await e(),n=window.location.href.split("").slice(31,67).join("");for(let e=0;e<t.length;e++)if(n===t[e].id)return console.log("FROM currentPositionOfCategory",t[e].price),[t[e].price,t[e].position]})();for(let e=0;e<t.length;e++)t[e].innerHTML=String(n[0][e])})(),o(),(()=>{const e=document.getElementById("sidebar");e.addEventListener("click",(function(){e.classList.toggle("active")})),console.log("hete")})(),console.log("menu"),i()}catch(e){console.log("Ошибка",e)}})()})();